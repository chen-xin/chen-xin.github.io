<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="description"><link rel="stylesheet" type="text/css" href="/css/azw.css"></head><body><div id="header"><ul class="title-menu"><li><a class="nav" href="/">Home</a></li><li><a class="nav" href="/tags">Tags</a></li><li><a class="nav" href="/categories">Category</a></li><li><a class="nav" href="/archives">Archive</a></li><li><input id="search-site" placeholder="Search..."></li></ul><div class="post-header-wrapper"><div class="post-header"><div class="post-title">Create a Hexo theme from scratch 1 - Stack everything together</div><div class="post-meta"><div class="post-date">2018-02-16 02:40:32</div><div class="post-tag"><a class="nav tag" href="/tags/hexo/">hexo</a><a class="nav tag" href="/tags/stylus/">stylus</a><a class="nav tag" href="/tags/pug/">pug</a></div></div></div></div></div><hr><div id="content-wrapper"><div id="content"><p>A few days ago the idea of making my own blog hit me. After some investigation, I decided to start from Hexo, a static blog generator with plenty of plugin and themes.<br>There are lots of cool themes already, some actully meet my needs, but the idea of creating my cool theme hit me harder.<br>I expected to finish the theme job within a couple of hours, and time laughed at the arrogent newbie.</p>
<h1 id="Step0-Prepare"><a href="#Step0-Prepare" class="headerlink" title="Step0: Prepare"></a>Step0: Prepare</h1><ol>
<li>Install Hexo with the default “landscape” theme, create some posts to feel if you like it.</li>
<li>Read the Hexo docs on theme, template, variables and helpers.</li>
<li>Inspect some published themes, try to figure out how they works.</li>
<li>Pick template language. For it is the year of pug of Chinese luna calendar, pug it is.</li>
<li>Prepare project structure(suppose Hexo installed to <em>~/hexo-blog</em>), and configure theme to ‘AzureWind’:</li>
</ol>
<blockquote>
<p>At the very least, a theme should contain an index template.</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cd</span> ~/hexo-blog/themes</span><br><span class="line">mkdir AzureWind</span><br><span class="line"><span class="built_in">cd</span> AzureWind</span><br><span class="line">touch _config.yml</span><br><span class="line">mkdir -p languages layout <span class="comment"># scripts source/css source/js source/img</span></span><br><span class="line"><span class="built_in">cd</span> layout</span><br><span class="line">touch index.pug <span class="comment"># layout.pug archive.pug category.pug tag.pug post.pug page.pug</span></span><br><span class="line">git init</span><br></pre></td></tr></table></figure>
<h1 id="Step1-Stack-everything-together"><a href="#Step1-Stack-everything-together" class="headerlink" title="Step1: Stack everything together"></a>Step1: Stack everything together</h1><blockquote>
<p>TARGET: Create the index view, with every thing we want in it.</p>
</blockquote>
<h2 id="First-the-pug-template-skeleton"><a href="#First-the-pug-template-skeleton" class="headerlink" title="First the pug template skeleton:"></a>First the pug template skeleton:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">doctype html</span><br><span class="line">html</span><br><span class="line">  head</span><br><span class="line">    meta(http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=utf-8&quot;)</span><br><span class="line">    meta(name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;)</span><br><span class="line">    meta(name=&quot;description&quot; content=config.description)</span><br><span class="line">    link(rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/css/az.css&quot;)</span><br><span class="line">body</span><br></pre></td></tr></table></figure>
<p>The second <em>meta</em> line is required for responsive design ,which will auto layout for mobile and desktop. We shall implement that later, for now, just leave it here.<br>The third <em>meta</em> line was description about our blog, which retrieved from Hexo configure.<br>We shall definatly have some styles, so put the style sheet link here.</p>
<h2 id="Then-we-define-what-should-appear-on-our-index-view"><a href="#Then-we-define-what-should-appear-on-our-index-view" class="headerlink" title="Then we define what should appear on our index view:"></a>Then we define what should appear on our index view:</h2><ul>
<li>A header part, with background image and some text, maybe blog title, brieves,  etc.</li>
<li>The content part, which hold posts, with the following components within each post:<ul>
<li>post header<ul>
<li>title</li>
<li>post date</li>
<li>tags</li>
</ul>
</li>
<li>the post content</li>
<li>post footer</li>
</ul>
</li>
<li>The sider bar, with the following components:<ul>
<li>Home, RSS and About button</li>
<li>search bar</li>
<li>site categories</li>
<li>site tags</li>
</ul>
</li>
</ul>
<p>Let’s create the <em>header</em>, <em>content</em> and <em>sider</em> part, and define css classes for each components:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line">doctype html</span><br><span class="line">html</span><br><span class="line">  head</span><br><span class="line">    meta(http-equiv=&quot;content-type&quot; content=&quot;text/html; charset=utf-8&quot;)</span><br><span class="line">    meta(name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;)</span><br><span class="line">    meta(name=&quot;description&quot; content=config.description)</span><br><span class="line">    link(rel=&quot;stylesheet&quot; type=&quot;text/css&quot; href=&quot;/css/az.css&quot;)</span><br><span class="line">  body</span><br><span class="line">    #header</span><br><span class="line">      .site-title</span><br><span class="line">        != config.title</span><br><span class="line">      .site-subtitle</span><br><span class="line">        != config.subtitle</span><br><span class="line"></span><br><span class="line">    #content</span><br><span class="line">      for post in page.posts.toArray()</span><br><span class="line">        .post</span><br><span class="line">          .post-header</span><br><span class="line">            .post-title</span><br><span class="line">              a.title(href=url_for(post.path))</span><br><span class="line">                != post.title</span><br><span class="line">            .post-meta</span><br><span class="line">              .post-meta-group</span><br><span class="line">                != full_date(post.date)</span><br><span class="line">              .post-meta-group</span><br><span class="line">                for tag in post.tags.toArray()</span><br><span class="line">                  a(href=url_for(tag.path))= tag.name</span><br><span class="line">          .post-content</span><br><span class="line">            if post.excerpt</span><br><span class="line">              != post.excerpt</span><br><span class="line">            else</span><br><span class="line">              != post.content</span><br><span class="line">          .post-footer &lt;----------&gt;</span><br><span class="line">        hr</span><br><span class="line"></span><br><span class="line">    #sider</span><br><span class="line">      .side-widget</span><br><span class="line">        .side-widget-topnav</span><br><span class="line">          a(href=url_for(config.root)) Home</span><br><span class="line">          a(href=url_for(theme.about)) About</span><br><span class="line">          a(href=url_for(theme.rss)) RSS</span><br><span class="line"></span><br><span class="line">      .side-widget</span><br><span class="line">        .side-widget-search</span><br><span class="line">          input#search-site(placeholder=&quot;Search...&quot;)</span><br><span class="line"></span><br><span class="line">      if site.categories.length</span><br><span class="line">        .side-widget</span><br><span class="line">          .side-widget-list</span><br><span class="line">            h3.widget-title #&#123; __(&apos;categories&apos;) &#125;</span><br><span class="line">            .widget</span><br><span class="line">              != list_categories(&#123;show_count: true&#125;)</span><br><span class="line"></span><br><span class="line">      if site.tags.length</span><br><span class="line">        .side-widget</span><br><span class="line">          .side-widget-list</span><br><span class="line">            h3.widget-title #&#123; __(&apos;tags&apos;) &#125;</span><br><span class="line">            .widget</span><br><span class="line">              != list_tags(&#123;show_count: true&#125;)</span><br><span class="line"></span><br><span class="line">      .side-widget</span><br><span class="line">        .side-widget-list</span><br><span class="line">          h3.widget-title #&#123; __(&apos;archives&apos;) &#125;</span><br><span class="line">          .widget</span><br><span class="line">            != list_archives(&#123;show_count: true&#125;)</span><br></pre></td></tr></table></figure>
<p>Please note how to get post variables via <code>for post in page.posts.toArray()</code>, and same as tags.<br>And note that the ‘About’ and ‘RSS’ page should be defined in theme configure. In our case, it would be <em>~/hexo-blog/themes/AzureWind/_config.yml</em>.<br>We add hyperlink to post in title so we don’t need the <em>more..</em> button.<br>With full_date() Hexo helper we get date and time formated as what defined in site’s <em>_config.yml</em>.<br>The <code>__(&#39;categories&#39;)</code> is for internationalization, that will be discussed later.<br>For all 3 primary parts(<em>header</em>, <em>content</em>, <em>sider</em>), we also create a div to wrap all the content, so we can the padding, margin, border for it without intersecting other parts.11</p>
<h2 id="Restart-Hexo-server-to-see-the-result"><a href="#Restart-Hexo-server-to-see-the-result" class="headerlink" title="Restart Hexo server to see the result"></a>Restart Hexo server to see the result</h2><p><em>note</em>: While styles(*.css, *,styl, etc) will be automatic applied on change by Hexo server, templates(our *.pug) files sometimes won’t, we have to manully restart to see template changes. That’s why we put everything together first!</p>
<p>The page looks awful, all parts flow from top to bottom, post title looked same as normal text, no code highlight. We can just inspect to assure every part id and css class names correctly applied. In the next step, let’s add some style to it.  </p>
</div><div id="side-nav"><div class="side-widget"><div class="side-widget-toc"><div class="widget-title">toc</div><div class="widget"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Step0-Prepare"><span class="toc-text">Step0: Prepare</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Step1-Stack-everything-together"><span class="toc-text">Step1: Stack everything together</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#First-the-pug-template-skeleton"><span class="toc-text">First the pug template skeleton:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Then-we-define-what-should-appear-on-our-index-view"><span class="toc-text">Then we define what should appear on our index view:</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Restart-Hexo-server-to-see-the-result"><span class="toc-text">Restart Hexo server to see the result</span></a></li></ol></li></ol></div></div></div></div></div></body><script src="/js/az.js"></script></html>